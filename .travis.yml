language: cpp

compiler:
     - gcc
before_install:
    - echo ============ BOOST  INSTALL =============
    - mkdir boost
    - cd boost
    - wget http://sourceforge.net/projects/boost/files/boost/1.58.0/boost_1_58_0.tar.bz2/download
    - tar xjf boost_1_58_0.tar.bz2
    - cd boost_1_58_0
    - ./bootstrap.sh --with-library=filesystem,system,log,log_setup,chrono,thread --libdir=$HOME/boost_1_58/lib --includedir=$HOME/boost_1_58/include --exe-prefix=$HOME/boost_1_58
    - ./bjam
    - ./bjam install
    - export BOOST_ROOT=$HOME/boost_1_58
    - ls $BOOST_ROOT/lib
    - ls $BOOST_ROOT/include
    - echo ============ MONGO  INSTALL =============
    - mkdir mongo
    - cd mongo
    - git clone https://github.com/mongodb/mongo-cxx-driver.git
    - cd mongo-cxx-driver
    - ls
    - scons -j2 --64 --mute --sharedclient --prefix=$HOME/mongo-cxx install
    - ls $HOME/mongo-cxx
    - cd ../../
    - echo ============ ASSIMP INSTALL =============
    - mkdir assimp
    - cd assimp
    - git clone --branch=multipart https://github.com/3drepo/assimp.git      
    - CXXFLAGS+=-std=c++0x cmake -DASSIMP_BUILD_TESTS=OFF assimp
    - sudo make install
    - cd ../
before_script:
    - ls
    - MONGO_ROOT=$HOME/mongo-cxx cmake -DREPO_BUILD_CLIENT=ON -DREPO_BUILD_TESTS=ON .
script:
    make install

branches:
   only:
       - master
       - ISSUE_24

notifications:
    email: true
